<ion-view view-title="Incident" class="ion-view-background">
  <ion-nav-buttons side="right">
    <button class="button button-icon ion-help"
            ng-click="startWalkthrough()"></button>
  </ion-nav-buttons>
  <!--ion-nav-buttons side="left">
    <button class="button button-icon ion-close" ng-click="closeView()"></button>
  </ion-nav-buttons-->
  <ion-nav-title>{{ getFormattedDate(mapCtrl.start_ts) }}</ion-nav-title>
  <ion-content class="has-header" overflow-scroll="true" padding="true">
    <div class="row" style="text-align: center;display: block;">
      <div style="font-size: 1em;color: #303030;opacity: 0.7;">Recent trip from:
        {{getFormattedTime(mapCtrl.start_ts)}} &rarr; to:
        {{getFormattedTime(mapCtrl.end_ts)}}
      </div>
    </div>
    <!-- Map -->
    <div style="height: 10px;"></div>
    <leaflet geojson="mapCtrl.geojson" id="incident" defaults="mapCtrl.defaults"
             height="30%" width="100%" data-tap-disabled="true">
    </leaflet>
    <!-- Progress Bar -->
    <div style="height: 10px;"></div>
    <div class="row"
         style="height: 10px;width: 100%;margin: auto;margin-top: 5px;">
      <progress max="{{surveyQuestions.length - 1}}"
                value="{{curSlide}}"
                style="margin-left: auto; margin-right:auto;"></progress>
    </div>
    <!-- Slide Box -->
    <div style="height: 10px;"></div>
    <ion-slide-box show-pager="false" ng-init="disableSwipe()"
                   style="width: 100%;margin: auto;background: transparent !important;">
      <ion-slide id="surveyQ" ng-repeat="question in surveyQuestions">
        <div
          style="margin-top: 5px; margin-left: auto; margin-right:auto; font-size: 1.25em;color: #303030; opacity: 0.7;">
          {{question.title}}
        </div>
        <div style="height: 100%; padding-top: 5px;">
          <ion-scroll style="height: 40%;" id=mode_list>
            <ion-list ng-repeat="option in question.options">
              <ion-radio ng-model="question.response" ng-value="option.value"
                         style="color: #585858 !important ;">{{option.text}}
              </ion-radio>
            </ion-list>
          </ion-scroll>
        </div>
      </ion-slide>
    </ion-slide-box>
    <!-- Button -->
    <div
      style="text-align: center;width: 100%;position: absolute;left: 0;bottom: 0;"
      ng-if="curSlide < surveyQuestions.length - 1">
      <button style="width: 100%;color: #585858;border: 0px;" class="button"
              ng-click="nextSlide()">Continue
      </button>
    </div>
    <div
      style="text-align: center;width: 100%;position: absolute;left: 0;bottom: 0;"
      ng-if="curSlide >= surveyQuestions.length - 1">
      <button style="width: 100%;color: #585858;border: 0px;" class="button"
              ng-click="doneSlide()">Done
      </button>
    </div>
    <!--div style="" class="button-bar">
        <button class="button button-stable button-block icon ion-refresh"
            ng-click="refreshWholeMap()">Refresh</button>
        <button class="button button-stable button-block"
            ng-click="refreshTiles()">Fix Map</button>
    </div-->
  </ion-content>
</ion-view>
