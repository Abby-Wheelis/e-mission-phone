<ion-view ng-class="ion-view-background">
    <ion-nav-buttons side="left">
      <button ng-if="!sel_author_spec.author_email" class="button button-icon ion-gear-a" ng-click="author_spec_sel_modal.show()">
        Choose evaluation
      </button>
      <div ng-if="sel_author_spec.author_email">
        <ion-title>{{sel_author_spec.sel_spec.name}}</ion-title>
        <button class="button button-icon ion-edit" side="right" ng-click="author_spec_sel_modal.show()">
        </button>
      </div>
    </ion-nav-buttons>
    <ion-content class="has-header">
        <ion-card id="eval-settings" class="card {{eval_settings_card_display.class}}">
            <ion-item class="item-divider">Evaluation settings
            <div ng-click="toggleEvalCardDisplay()" class="arrow-position">
                <i class="{{eval_settings_card_display.icon}}"></i>
            </div>
            </ion-item>
            <ion-item ng-style="$scope.curr_regime.registered ? {} : {color: 'red'}">
                {{curr_regime.email}} ({{curr_regime.profile}})
            </ion-item>
            <ion-item>Author: {{sel_author_spec.author_email}}</ion-item>
            <ion-item>Start: {{sel_author_spec.sel_spec.start_fmt_date}} to End: {{sel_author_spec.sel_spec.end_fmt_date}}</ion-item>
            <ion-item>Manufacturer: {{device_info.manufacturer}}</ion-item>
            <ion-item>Model: {{device_info.model}}</ion-item>
            <ion-item>Version: {{device_info.version}}</ion-item>
        </ion-card>
        <ion-card ng-if="sel_author_spec.sel_spec
                            && (curr_regime.registered)"
            id="eval-settings"
            class="card small-calibration-settings-card">
            <ion-item class="item-divider">
            <div class="row">
                <div class="col-75">
                    Calibration
                </div>
                <div class="col-25">
                <label ng-if="(curr_regime.calibration.curr_trip)
                                && (!curr_regime.evaluation.on)"
                       class="toggle toggle-color">
                   <input type="checkbox" ng-model="curr_regime.calibration.on"
                        ng-changed="startCalibration()">
                   <div class="track">
                     <div class="handle"></div>
                   </div>
                </label>
                </div>
            </div>
            </ion-item>
            <button class="button button-block"
                ng-click="selectCalibrationTrip()">
                {{curr_regime.calibration.curr_trip}}
            </button>
        </ion-card>
        <ion-card id="eval-settings" ng-if="sel_author_spec.sel_spec"
            class="card {{sensing_settings_card_display.class}}">
            <ion-item class="item-divider">Sensing selection
            <div ng-click="toggleSensingCardDisplay()" class="arrow-position">
                <i class="{{sensing_settings_card_display.icon}}"></i>
            </div>
            </ion-item>
            <button ng-disabled="(curr_regime.isAccuracyControl) ||
                           (curr_regime.isPowerControl)"
                class="button button-block"
                ng-click="selectSensingSettings()">
                {{curr_regime.evaluation.sensing_settings.label}}
            </button>
            <ion-item ng-repeat="(k,v) in curr_regime.evaluation.sensing_settings">
                <b>{{k}}:</b> {{v}}
            </ion-item>
        </ion-card>
        <ion-card ng-if="(sel_author_spec.sel_spec)
                                && (curr_regime.registered)"
            id="eval-settings"
            class="card small-evaluation-settings-card">
            <ion-item class="item-divider">
            <div class="row">
                <div class="col-75">
                    Evaluation
                </div>
                <div class="col-25">
                <label ng-if="(curr_regime.evaluation.curr_trip) && (!curr_regime.calibration.on)"
                       class="toggle toggle-color">
                   <input type="checkbox" ng-model="curr_regime.evaluation.on"
                        ng-changed="startCalibration()">
                   <div class="track">
                     <div class="handle"></div>
                   </div>
                </label>
                </div>
            </div>
            </ion-item>
            <button class="button button-block"
                ng-click="selectEvaluationTrip()">
                {{curr_regime.evaluation.curr_trip}}
            </button>
        </ion-card>
    </ion-content>
</ion-view>
