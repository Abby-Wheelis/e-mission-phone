<ion-view view-title="{{'main-metrics.dashboard' | translate}}" class="ion-view-background" translate-namespace="main-metrics">
  <ion-nav-bar class="bar-stable">
  </ion-nav-bar>
  <ion-nav-buttons side="primary">
      <button class="button button-icon" ng-click="share()">
        <i class="icon ion-share"></i>
      </button>
  </ion-nav-buttons>
  <ion-nav-buttons side="secondary">
      <button class="button button-icon" ng-click="doRefresh()">
        <i class="icon ion-refresh"></i>
      </button>
  </ion-nav-buttons>
  <ion-content>
    <div class="card" id="suggestion-card" ng-click="linkToMaps()">
      <h4 class="dashboard-headers" translate>{{'.suggestion'}}</h4>
      <div class="user-carbon">
        {{suggestionData.suggestion}}
      </div>
      <div id="percentage-change" translate>
        {{.suggestion-savings}}
      </div>
    </div>

    <div ng-class="changeFootprintCardHeight()" id="dashboard-stats" class="card">
      <h4 class="dashboard-headers" translate>{{.weekly-stats}}</h4>
      <div class="row">
        <div class="col-left"><b translate>COâ‚‚ {{.footprint}}: </b></div>
        <div class="col-right">{{carbonData.userCarbon}}</div>
      </div>
      <div class="row">
        <div class="col-left"><b translate>{{.lastweek}}: </b></div>
        <div class="col-right">{{carbonData.lastWeekUserCarbon}}</div>
      </div>
      <div class="row">
        <div class="col-left"><b translate>{{.distance}}: </b></div>
        <div class="col-right">{{summaryData.defaultSummary.totalDistance}}</div>
      </div>
      <div class="row">
        <div class="col-left"><b translate>{{.fav-mode}}: </b></div>
        <div class="col-right">{{summaryData.defaultSummary.favMode}}</div>
      </div>
    </div>

    <div id="dashboard-bottom" class="card">
      <h4 class="dashboard-headers" translate>{{.recent-trips}}</h4>
      <!-- Links to trip detail page -->
      <div ng-if="summaryData.userSummary.recentTrips.length == 0" style="height:20px;" translate>
        {{.no-available-recent-trips}}
      </div>
      <div ng-if="summaryData.userSummary.recentTrips.length > 0">
        <div ng-repeat="recentTrip in summaryData.userSummary.recentTrips">
          <ion-item style="background-color: transparent;padding: 0px;" id="no-border" class="list-item" ng-click="openRecentTrip(recentTrip.id, recentTrip.startTime)">
          <div class="trip-card" style="margin-top: 5px; border-top-width: 2px;">
            <div style="flex-grow:2;display:flex;align-items: center;">
              <img alt="MODE" ng-src = "{{recentTrip.mode}}" onerror="this.src='img/mode4.png'" style="height:30px;">
            </div>
            <div style="flex-grow:4;display:flex;align-items: center;">
              {{getFormattedTime(recentTrip.startTime)}} to {{getFormattedTime(recentTrip.endTime)}}<br>
              {{recentTrip.distance}} | {{recentTrip.co2}}
            </div>
            <div style="flex-grow:1;display:flex;align-items:center;" href="#">
              <i class="ion-ios-arrow-right"></i>
            </div>
          </div>
          </ion-item>
        </div>
      </div>
    </div>
  </ion-content>
</ion-view>
